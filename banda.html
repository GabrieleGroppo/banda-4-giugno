<!DOCTYPE html>
<html lang="it">
<head>
    <title>Profilo Banda 4 Giugno 1859</title>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="script.js"></script>
</head>
<body>
    <div class="w3-top">
        <div class="w3-bar w3-card custom-bg">
            <a href="javascript:history.back()" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Go Back</a>
        </div>
    </div>

    <div class="w3-content w3-padding-64" style="max-width:2000px;">
        <div class="w3-container w3-content w3-center w3-padding-32" style="max-width:800px">
            <h2 class="w3-wide w3-padding-32">Banda 4 Giugno 1859</h2>
            <img src="images/banda.jpg" alt="Foto della banda" style="width:100%; max-width:800px; border-radius: 10px;">
            <p class="w3-justify w3-padding-16 w3-center">La Banda 4 Giugno 1859 è un'istituzione musicale con una lunga tradizione, che porta la passione per la musica in tutta la comunità.</p>
        </div>

        <div class="w3-container w3-content w3-center w3-padding-32" style="max-width:800px">
            <h3>Bandisti</h3>
            <select id="strumentoFiltro" class="w3-select w3-margin-bottom" onchange="filtraBandisti()">
                <option value="">Tutti gli strumenti</option>
            </select>
            <ul id="bandisti-list" class="w3-ul w3-card-4" style="color: white;"></ul>
        </div>
    </div>

    <script>
        let bandisti = [];

        async function caricaBandisti() {
            const response = await fetch('bandisti.csv');
            const data = await response.text();
            const righe = data.split('\n');
            let strumenti = new Set();
            bandisti = [];
            
            righe.forEach((riga, index) => {
                if (index > 0 && riga.trim() !== "") {
                    let [nome, strumento] = riga.split(',');
                    bandisti.push({ nome, strumento });
                    strumenti.add(strumento.trim());
                }
            });
            
            let filtro = document.getElementById("strumentoFiltro");
            strumenti.forEach(strumento => {
                let option = document.createElement("option");
                option.value = strumento;
                option.textContent = strumento;
                filtro.appendChild(option);
            });
            
            mostraBandisti(bandisti);
        }

        function mostraBandisti(lista) {
            let listaElement = document.getElementById("bandisti-list");
            listaElement.innerHTML = "";
            lista.forEach(({ nome, strumento }) => {
                let elemento = document.createElement("li");
                elemento.className = "w3-padding-16";
                elemento.innerHTML = `<b>${nome}</b> - ${strumento}`;
                listaElement.appendChild(elemento);
            });
        }

        function filtraBandisti() {
            let filtro = document.getElementById("strumentoFiltro").value;
            let filtrati = filtro ? bandisti.filter(b => b.strumento === filtro) : bandisti;
            mostraBandisti(filtrati);
        }

        window.onload = caricaBandisti;
    </script>
    
    <div id="footer-container"></div>
</body>
</html>
